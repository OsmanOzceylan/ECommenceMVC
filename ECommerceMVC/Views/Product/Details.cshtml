@model ECommerceMVC.Core.Models.Response.ProductResponseModel

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-warning">
        @TempData["ErrorMessage"]
    </div>
}

@{
    // null beklemesini kaldırıyoruz, bool her zaman dolu olacak şekilde
    bool isFavorite = Model.IsFavorite;
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-6 text-center">
            <img src="@(Model.ImageUrl ?? "/images/default.png")"
                 class="img-fluid"
                 alt="@Model.ProductName"
                 style="max-width:450px; border-radius:50px;" />
        </div>
        <div class="col-md-6">
            <h2>@Model.ProductName</h2>
            <p>Kategori: @Model.CategoryName</p>
            <h4>Fiyat: @Model.UnitPrice.ToString("C")</h4>

            <!-- Sepete ekle -->
            <form asp-action="AddToCart" asp-controller="Product" method="post">
                <input type="hidden" name="productId" value="@Model.ProductID" />
                <input type="hidden" name="productName" value="@Model.ProductName" />
                <input type="hidden" name="unitPrice" value="@Model.UnitPrice" />
                <input type="hidden" name="imageUrl" value="@Model.ImageUrl" />
                <button type="submit" class="btn btn-success mb-2">Sepete Ekle</button>
            </form>

            <!-- Favori ekle / çıkar -->
            <form asp-action="ToggleFavorite" asp-controller="Favorite" method="post">
                <input type="hidden" name="productId" value="@Model.ProductID" />
                <button type="submit" class="btn @(isFavorite ? "btn-warning" : "btn-outline-warning")">
                    @(isFavorite ? "Favoriden Çıkar" : "Favoriye Ekle")
                </button>
            </form>
        </div>
    </div>
</div>
